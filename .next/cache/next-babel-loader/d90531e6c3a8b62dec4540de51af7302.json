{"ast":null,"code":"import shortId from \"shortid\";\nimport produce from \"immer\"; // import faker from \"faker\";\n\nexport const initialState = {\n  mainPosts: [],\n  imagePaths: [],\n  hasMorePosts: true,\n  likePostLoading: false,\n  likePostDone: false,\n  likePostError: null,\n  unlikePostLoading: false,\n  unlikePostDone: false,\n  unlikePostError: null,\n  loadPostLoading: false,\n  loadPostDone: false,\n  loadPostError: null,\n  loadPostsLoading: false,\n  loadPostsDone: false,\n  loadPostsError: null,\n  addPostLoading: false,\n  addPostDone: false,\n  addPostError: null,\n  removePostLoading: false,\n  removePostDone: false,\n  removePostError: null,\n  addCommentLoading: false,\n  addCommentDone: false,\n  addCommentError: null,\n  uploadImagesLoading: false,\n  uploadImagesDone: false,\n  uploadImagesError: null,\n  retweetLoading: false,\n  retweetDone: false,\n  retweetError: null\n}; // export const generateDummyPost = (number) =>\n//   Array(number)\n//     .fill()\n//     .map((v, i) => ({\n//       id: shortId.generate(),\n//       User: {\n//         id: shortId.generate(),\n//         nickname: faker.name.findName(),\n//       },\n//       content: faker.lorem.paragraph(),\n//       Images: [{ src: faker.image.image() }],\n//       Comments: [\n//         {\n//           User: {\n//             id: shortId.generate(),\n//             nickname: faker.name.findName(),\n//           },\n//           content: faker.lorem.sentence(),\n//         },\n//       ],\n//     }));\n// initialState.mainPosts = initialState.mainPosts.concat(generateDummyPost(10));\n\nexport const UPLOAD_IMAGES_REQUEST = \"UPLOAD_IMAGES_REQUEST\";\nexport const UPLOAD_IMAGES_SUCCESS = \"UPLOAD_IMAGES_SUCCESS\";\nexport const UPLOAD_IMAGES_FAILURE = \"UPLOAD_IMAGES_FAILURE\";\nexport const LIKE_POST_REQUEST = \"LIKE_POST_REQUEST\";\nexport const LIKE_POST_SUCCESS = \"LIKE_POST_SUCCESS\";\nexport const LIKE_POST_FAILURE = \"LIKE_POST_FAILURE\";\nexport const UNLIKE_POST_REQUEST = \"UNLIKE_POST_REQUEST\";\nexport const UNLIKE_POST_SUCCESS = \"UNLIKE_POST_SUCCESS\";\nexport const UNLIKE_POST_FAILURE = \"UNLIKE_POST_FAILURE\";\nexport const LOAD_POST_REQUEST = \"ADD_POST_REQUEST\";\nexport const LOAD_POST_SUCCESS = \"ADD_POST_SUCCESS\";\nexport const LOAD_POST_FAILURE = \"ADD_POST_FAILURE\";\nexport const LOAD_POSTS_REQUEST = \"ADD_POSTS_REQUEST\";\nexport const LOAD_POSTS_SUCCESS = \"ADD_POSTS_SUCCESS\";\nexport const LOAD_POSTS_FAILURE = \"ADD_POSTS_FAILURE\";\nexport const ADD_POST_REQUEST = \"ADD_POST_REQUEST\";\nexport const ADD_POST_SUCCESS = \"ADD_POST_SUCCESS\";\nexport const ADD_POST_FAILURE = \"ADD_POST_FAILURE\";\nexport const REMOVE_POST_REQUEST = \"REMOVE_POST_REQUEST\";\nexport const REMOVE_POST_SUCCESS = \"REMOVE_POST_SUCCESS\";\nexport const REMOVE_POST_FAILURE = \"REMOVE_POST_FAILURE\";\nexport const ADD_COMMENT_REQUEST = \"ADD_COMMENT_REQUEST\";\nexport const ADD_COMMENT_SUCCESS = \"ADD_COMMENT_SUCCESS\";\nexport const ADD_COMMENT_FAILURE = \"ADD_COMMENT_FAILURE\";\nexport const RETWEET_REQUEST = \"RETWEET_REQUEST\";\nexport const RETWEET_SUCCESS = \"RETWEET_SUCCESS\";\nexport const RETWEET_FAILURE = \"RETWEET_FAILURE\";\nexport const REMOVE_IMAGE = \"REMOVE_IMAGE\";\nexport const addPost = data => ({\n  type: ADD_POST_REQUEST,\n  data\n});\nexport const addComment = data => ({\n  type: ADD_COMMENT_REQUEST,\n  data\n});\n\nconst dummyPost = data => ({\n  id: data.id,\n  content: data.content,\n  User: {\n    id: 1,\n    nickname: \"제로초\"\n  },\n  Images: [],\n  Comments: []\n});\n\nconst dummyComment = data => ({\n  id: shortId.generate(),\n  content: data,\n  User: {\n    id: 1,\n    nickname: \"제로초\"\n  }\n});\n\nconst reducer = (state = initialState, action) => {\n  return produce(state, draft => {\n    switch (action.type) {\n      case RETWEET_REQUEST:\n        draft.retweetLoading = true;\n        draft.retweetDone = false;\n        draft.retweetError = null;\n        break;\n\n      case RETWEET_SUCCESS:\n        {\n          draft.retweetLoading = false;\n          draft.retweetDone = true;\n          draft.mainPosts.unshift(action.data);\n          break;\n        }\n\n      case RETWEET_FAILURE:\n        draft.retweetLoading = false;\n        draft.retweetError = action.error;\n        break;\n\n      case REMOVE_IMAGE:\n        draft.imagePaths = draft.imagePaths.filter((v, i) => i !== action.data);\n        break;\n\n      case UPLOAD_IMAGES_REQUEST:\n        draft.uploadImagesLoading = true;\n        draft.uploadImagesDone = false;\n        draft.uploadImagesError = null;\n        break;\n\n      case UPLOAD_IMAGES_SUCCESS:\n        {\n          draft.imagePaths = action.data;\n          draft.uploadImagesLoading = false;\n          draft.uploadImagesDone = true;\n          break;\n        }\n\n      case UPLOAD_IMAGES_FAILURE:\n        draft.uploadImagesLoading = false;\n        draft.uploadImagesError = action.error;\n        break;\n\n      case LIKE_POST_REQUEST:\n        draft.likePostLoading = true;\n        draft.likePostDone = false;\n        draft.likePostError = null;\n        break;\n\n      case LIKE_POST_SUCCESS:\n        {\n          const post = draft.mainPosts.find(v => v.id === action.data.PostId);\n          post.Likers.push({\n            id: action.data.UserId\n          });\n          draft.likePostLoading = false;\n          draft.likePostDone = true;\n          break;\n        }\n\n      case LIKE_POST_FAILURE:\n        draft.likePostLoading = false;\n        draft.likePostError = action.error;\n        break;\n\n      case UNLIKE_POST_REQUEST:\n        draft.unlikePostLoading = true;\n        draft.unlikePostDone = false;\n        draft.unlikePostError = null;\n        break;\n\n      case UNLIKE_POST_SUCCESS:\n        {\n          const post = draft.mainPosts.find(v => v.id === action.data.PostId);\n          post.Likers = post.Likers.filter(v => v.id !== action.data.UserId);\n          draft.unlikePostLoading = false;\n          draft.unlikePostDone = true;\n          break;\n        }\n\n      case UNLIKE_POST_FAILURE:\n        draft.unlikePostLoading = false;\n        draft.unlikePostError = action.error;\n        break;\n\n      case LOAD_POST_REQUEST:\n        draft.loadPostLoading = true;\n        draft.loadPostDone = false;\n        draft.loadPostError = null;\n        break;\n\n      case LOAD_POST_SUCCESS:\n        draft.loadPostLoading = false;\n        draft.loadPostDone = true;\n        draft.singlePost = action.data;\n        break;\n\n      case LOAD_POST_FAILURE:\n        draft.addPostLoading = false;\n        draft.addPostError = action.error;\n        break;\n\n      case LOAD_POSTS_REQUEST:\n        draft.loadPostsLoading = true;\n        draft.loadPostsDone = false;\n        draft.loadPostsError = null;\n        break;\n\n      case LOAD_POSTS_SUCCESS:\n        draft.loadPostsLoading = false;\n        draft.loadPostsDone = true;\n        draft.mainPosts = draft.mainPosts.concat(action.data);\n        draft.hasMorePosts = draft.mainPosts.length === 10;\n        break;\n\n      case LOAD_POSTS_FAILURE:\n        draft.loadPostsLoading = false;\n        draft.loadPostsError = action.error;\n        break;\n\n      case ADD_POST_REQUEST:\n        draft.addPostLoading = true;\n        draft.addPostDone = false;\n        draft.addPostError = null;\n        break;\n\n      case ADD_POST_SUCCESS:\n        draft.addPostLoading = false;\n        draft.addPostDone = true;\n        draft.mainPosts.unshift(action.data);\n        draft.imagePaths = [];\n        break;\n\n      case ADD_POST_FAILURE:\n        draft.addPostLoading = false;\n        draft.addPostError = action.error;\n        break;\n\n      case REMOVE_POST_REQUEST:\n        draft.removePostLoading = true;\n        draft.removePostDone = false;\n        draft.removePostError = null;\n        break;\n\n      case REMOVE_POST_SUCCESS:\n        draft.mainPosts = draft.mainPosts.filter(v => v.id !== action.data.PostId);\n        draft.removePostLoading = false;\n        draft.removePostDone = true;\n        break;\n\n      case REMOVE_POST_FAILURE:\n        draft.removePostLoading = false;\n        draft.removePostError = action.error;\n        break;\n\n      case ADD_COMMENT_REQUEST:\n        draft.addCommentLoading = true;\n        draft.addCommentDone = false;\n        draft.addCommentError = null;\n        break;\n\n      case ADD_COMMENT_SUCCESS:\n        {\n          const post = draft.mainPosts.find(v => v.id === action.data.PostId);\n          post.Comments.unshift(action.data);\n          draft.addCommentLoading = false;\n          draft.addCommentDone = true;\n          break; // const postIndex = state.mainPosts.findIndex(\n          //   (y) => y.id === action.data.postId\n          // );\n          // const post = state.mainPosts[postIndex];\n          // post.Comments = [dummyComment(action.data.content), ...post.Comments];\n          // const mainPosts = [...state.mainPosts];\n          // mainPosts[postIndex] = post;\n          // return {\n          //   ...state,\n          //   mainPosts,\n          //   addCommentLoading: false,\n          //   addCommentDone: true,\n          // };\n        }\n\n      case ADD_COMMENT_FAILURE:\n        draft.addCommentLoading = false;\n        draft.addCommentError = action.error;\n        break;\n\n      default:\n        break;\n    }\n  });\n};\n\nexport default reducer;","map":{"version":3,"sources":["/Users/jhunderdog/NBF/reducers/post.js"],"names":["shortId","produce","initialState","mainPosts","imagePaths","hasMorePosts","likePostLoading","likePostDone","likePostError","unlikePostLoading","unlikePostDone","unlikePostError","loadPostLoading","loadPostDone","loadPostError","loadPostsLoading","loadPostsDone","loadPostsError","addPostLoading","addPostDone","addPostError","removePostLoading","removePostDone","removePostError","addCommentLoading","addCommentDone","addCommentError","uploadImagesLoading","uploadImagesDone","uploadImagesError","retweetLoading","retweetDone","retweetError","UPLOAD_IMAGES_REQUEST","UPLOAD_IMAGES_SUCCESS","UPLOAD_IMAGES_FAILURE","LIKE_POST_REQUEST","LIKE_POST_SUCCESS","LIKE_POST_FAILURE","UNLIKE_POST_REQUEST","UNLIKE_POST_SUCCESS","UNLIKE_POST_FAILURE","LOAD_POST_REQUEST","LOAD_POST_SUCCESS","LOAD_POST_FAILURE","LOAD_POSTS_REQUEST","LOAD_POSTS_SUCCESS","LOAD_POSTS_FAILURE","ADD_POST_REQUEST","ADD_POST_SUCCESS","ADD_POST_FAILURE","REMOVE_POST_REQUEST","REMOVE_POST_SUCCESS","REMOVE_POST_FAILURE","ADD_COMMENT_REQUEST","ADD_COMMENT_SUCCESS","ADD_COMMENT_FAILURE","RETWEET_REQUEST","RETWEET_SUCCESS","RETWEET_FAILURE","REMOVE_IMAGE","addPost","data","type","addComment","dummyPost","id","content","User","nickname","Images","Comments","dummyComment","generate","reducer","state","action","draft","unshift","error","filter","v","i","post","find","PostId","Likers","push","UserId","singlePost","concat","length"],"mappings":"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","sourcesContent":["import shortId from \"shortid\";\nimport produce from \"immer\";\n// import faker from \"faker\";\n\nexport const initialState = {\n  mainPosts: [],\n  imagePaths: [],\n  hasMorePosts: true,\n\n  likePostLoading: false,\n  likePostDone: false,\n  likePostError: null,\n  unlikePostLoading: false,\n  unlikePostDone: false,\n  unlikePostError: null,\n\n  loadPostLoading: false,\n  loadPostDone: false,\n  loadPostError: null,\n\n  \n  loadPostsLoading: false,\n  loadPostsDone: false,\n  loadPostsError: null,\n  addPostLoading: false,\n  addPostDone: false,\n  addPostError: null,\n  removePostLoading: false,\n  removePostDone: false,\n  removePostError: null,\n  addCommentLoading: false,\n  addCommentDone: false,\n  addCommentError: null,\n\n  uploadImagesLoading: false,\n  uploadImagesDone: false,\n  uploadImagesError: null,\n\n  retweetLoading: false,\n  retweetDone: false,\n  retweetError: null,\n};\n// export const generateDummyPost = (number) =>\n//   Array(number)\n//     .fill()\n//     .map((v, i) => ({\n//       id: shortId.generate(),\n//       User: {\n//         id: shortId.generate(),\n//         nickname: faker.name.findName(),\n//       },\n//       content: faker.lorem.paragraph(),\n//       Images: [{ src: faker.image.image() }],\n//       Comments: [\n//         {\n//           User: {\n//             id: shortId.generate(),\n//             nickname: faker.name.findName(),\n//           },\n//           content: faker.lorem.sentence(),\n//         },\n//       ],\n//     }));\n\n// initialState.mainPosts = initialState.mainPosts.concat(generateDummyPost(10));\nexport const UPLOAD_IMAGES_REQUEST = \"UPLOAD_IMAGES_REQUEST\";\nexport const UPLOAD_IMAGES_SUCCESS = \"UPLOAD_IMAGES_SUCCESS\";\nexport const UPLOAD_IMAGES_FAILURE = \"UPLOAD_IMAGES_FAILURE\";\n\n\nexport const LIKE_POST_REQUEST = \"LIKE_POST_REQUEST\";\nexport const LIKE_POST_SUCCESS = \"LIKE_POST_SUCCESS\";\nexport const LIKE_POST_FAILURE = \"LIKE_POST_FAILURE\";\n\nexport const UNLIKE_POST_REQUEST = \"UNLIKE_POST_REQUEST\";\nexport const UNLIKE_POST_SUCCESS = \"UNLIKE_POST_SUCCESS\";\nexport const UNLIKE_POST_FAILURE = \"UNLIKE_POST_FAILURE\";\n\nexport const LOAD_POST_REQUEST = \"ADD_POST_REQUEST\";\nexport const LOAD_POST_SUCCESS = \"ADD_POST_SUCCESS\";\nexport const LOAD_POST_FAILURE = \"ADD_POST_FAILURE\";\n\nexport const LOAD_POSTS_REQUEST = \"ADD_POSTS_REQUEST\";\nexport const LOAD_POSTS_SUCCESS = \"ADD_POSTS_SUCCESS\";\nexport const LOAD_POSTS_FAILURE = \"ADD_POSTS_FAILURE\";\n\nexport const ADD_POST_REQUEST = \"ADD_POST_REQUEST\";\nexport const ADD_POST_SUCCESS = \"ADD_POST_SUCCESS\";\nexport const ADD_POST_FAILURE = \"ADD_POST_FAILURE\";\n\nexport const REMOVE_POST_REQUEST = \"REMOVE_POST_REQUEST\";\nexport const REMOVE_POST_SUCCESS = \"REMOVE_POST_SUCCESS\";\nexport const REMOVE_POST_FAILURE = \"REMOVE_POST_FAILURE\";\n\nexport const ADD_COMMENT_REQUEST = \"ADD_COMMENT_REQUEST\";\nexport const ADD_COMMENT_SUCCESS = \"ADD_COMMENT_SUCCESS\";\nexport const ADD_COMMENT_FAILURE = \"ADD_COMMENT_FAILURE\";\n\nexport const RETWEET_REQUEST = \"RETWEET_REQUEST\";\nexport const RETWEET_SUCCESS = \"RETWEET_SUCCESS\";\nexport const RETWEET_FAILURE = \"RETWEET_FAILURE\";\n\nexport const REMOVE_IMAGE = \"REMOVE_IMAGE\";\nexport const addPost = (data) => ({\n  type: ADD_POST_REQUEST,\n  data,\n});\n\nexport const addComment = (data) => ({\n  type: ADD_COMMENT_REQUEST,\n  data,\n});\n\nconst dummyPost = (data) => ({\n  id: data.id,\n  content: data.content,\n  User: {\n    id: 1,\n    nickname: \"제로초\", \n  },\n  Images: [],\n  Comments: [],\n});\n\nconst dummyComment = (data) => ({\n  id: shortId.generate(),\n  content: data,\n  User: {\n    id: 1,\n    nickname: \"제로초\",\n  },\n});\n\nconst reducer = (state = initialState, action) => {\n  return produce(state, (draft) => {\n    switch (action.type) {\n      case RETWEET_REQUEST:\n        draft.retweetLoading = true;\n        draft.retweetDone = false;\n        draft.retweetError = null;\n        break;\n      case RETWEET_SUCCESS: {\n        \n        draft.retweetLoading = false;\n        draft.retweetDone = true;\n        draft.mainPosts.unshift(action.data);\n        break;\n      }\n      case RETWEET_FAILURE:\n        draft.retweetLoading = false;\n        draft.retweetError = action.error;\n        break;\n\n      case REMOVE_IMAGE: \n      draft.imagePaths = draft.imagePaths.filter((v,i)=> i !== action.data);\n      \n      break;\n      case UPLOAD_IMAGES_REQUEST:\n        draft.uploadImagesLoading = true;\n        draft.uploadImagesDone = false;\n        draft.uploadImagesError = null;\n        break;\n      case UPLOAD_IMAGES_SUCCESS: {    \n        draft.imagePaths = action.data;\n        draft.uploadImagesLoading = false;\n        draft.uploadImagesDone = true;\n        break;\n      }\n      case UPLOAD_IMAGES_FAILURE:\n        draft.uploadImagesLoading = false;\n        draft.uploadImagesError = action.error;\n        break;\n\n\n\n      case LIKE_POST_REQUEST:\n        draft.likePostLoading = true;\n        draft.likePostDone = false;\n        draft.likePostError = null;\n        break;\n      case LIKE_POST_SUCCESS: {\n        const post = draft.mainPosts.find((v) => v.id === action.data.PostId);\n        post.Likers.push({ id: action.data.UserId });\n        draft.likePostLoading = false;\n        draft.likePostDone = true;\n        break;\n      }\n      case LIKE_POST_FAILURE:\n        draft.likePostLoading = false;\n        draft.likePostError = action.error;\n        break;\n      case UNLIKE_POST_REQUEST: \n        draft.unlikePostLoading = true;\n        draft.unlikePostDone = false;\n        draft.unlikePostError = null;\n        break;\n      case UNLIKE_POST_SUCCESS: {\n        const post = draft.mainPosts.find((v) => v.id === action.data.PostId);\n        post.Likers = post.Likers.filter((v) => v.id !== action.data.UserId);\n        draft.unlikePostLoading = false;\n        draft.unlikePostDone = true;\n        break;        \n      }\n      case UNLIKE_POST_FAILURE:\n        draft.unlikePostLoading = false;\n        draft.unlikePostError = action.error;\n        break;\n\n\n        case LOAD_POST_REQUEST:\n          draft.loadPostLoading = true;\n          draft.loadPostDone = false;\n          draft.loadPostError = null;\n          break;\n        case LOAD_POST_SUCCESS:\n          draft.loadPostLoading = false;\n          draft.loadPostDone = true;\n          draft.singlePost = action.data;\n          \n          break;\n  \n        case LOAD_POST_FAILURE:\n          draft.addPostLoading = false;\n          draft.addPostError = action.error;\n          break;\n\n\n\n      case LOAD_POSTS_REQUEST:\n        draft.loadPostsLoading = true;\n        draft.loadPostsDone = false;\n        draft.loadPostsError = null;\n        break;\n      case LOAD_POSTS_SUCCESS:\n        draft.loadPostsLoading = false;\n        draft.loadPostsDone = true;\n        draft.mainPosts = draft.mainPosts.concat(action.data);\n        draft.hasMorePosts = draft.mainPosts.length === 10;\n        break;\n\n      case LOAD_POSTS_FAILURE:\n        draft.loadPostsLoading = false;\n        draft.loadPostsError = action.error;\n        break;\n\n      case ADD_POST_REQUEST:\n        draft.addPostLoading = true;\n        draft.addPostDone = false;\n        draft.addPostError = null;\n        break;\n      case ADD_POST_SUCCESS:\n        draft.addPostLoading = false;\n        draft.addPostDone = true;\n        draft.mainPosts.unshift(action.data);\n        draft.imagePaths = [];\n        break;\n\n      case ADD_POST_FAILURE:\n        draft.addPostLoading = false;\n        draft.addPostError = action.error;\n        break;\n\n      case REMOVE_POST_REQUEST:\n        draft.removePostLoading = true;\n        draft.removePostDone = false;\n        draft.removePostError = null;\n        break;\n      case REMOVE_POST_SUCCESS:\n        draft.mainPosts = draft.mainPosts.filter((v) => v.id !== action.data.PostId);\n        draft.removePostLoading = false;\n        draft.removePostDone = true;\n        break;\n      case REMOVE_POST_FAILURE:\n        draft.removePostLoading = false;\n        draft.removePostError = action.error;\n        break;\n      case ADD_COMMENT_REQUEST:\n        draft.addCommentLoading = true;\n        draft.addCommentDone = false;\n        draft.addCommentError = null;\n        break;\n      case ADD_COMMENT_SUCCESS: {\n        const post = draft.mainPosts.find((v) => v.id === action.data.PostId);\n        post.Comments.unshift(action.data);\n        draft.addCommentLoading = false;\n        draft.addCommentDone = true;\n        break;\n        // const postIndex = state.mainPosts.findIndex(\n        //   (y) => y.id === action.data.postId\n        // );\n        // const post = state.mainPosts[postIndex];\n        // post.Comments = [dummyComment(action.data.content), ...post.Comments];\n        // const mainPosts = [...state.mainPosts];\n        // mainPosts[postIndex] = post;\n        // return {\n        //   ...state,\n        //   mainPosts,\n        //   addCommentLoading: false,\n        //   addCommentDone: true,\n        // };\n      }\n      case ADD_COMMENT_FAILURE:\n        draft.addCommentLoading = false;\n        draft.addCommentError = action.error;\n        break;\n\n      default:\n        break;\n    }\n  });\n};\n\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}