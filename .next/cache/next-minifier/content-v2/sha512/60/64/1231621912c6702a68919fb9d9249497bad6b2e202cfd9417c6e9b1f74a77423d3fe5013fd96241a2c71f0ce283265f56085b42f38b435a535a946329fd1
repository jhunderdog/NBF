{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{RNiq:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"__N_SSP\",(function(){return p}));var c=n(\"q1tI\"),i=n(\"1zst\"),r=n(\"/MKj\"),o=n(\"ODXe\"),a=n(\"Vl3Y\"),l=n(\"5rEg\"),s=n(\"2/Rp\"),u=n(\"p+NB\"),d=n(\"3zrx\"),j=n(\"nKUr\"),f=function(){var e=Object(r.c)((function(e){return e.post})),t=e.imagePaths,n=e.addPostDone,i=Object(r.b)(),f=Object(d.a)(\"\"),b=Object(o.a)(f,3),p=b[0],m=b[1],O=b[2];Object(c.useEffect)((function(){n&&O(\"\")}),[n]);var h=Object(c.useCallback)((function(){if(!p||!p.trim())return alert(\"\\uac8c\\uc2dc\\uae00\\uc744 \\uc791\\uc131\\ud558\\uc138\\uc694.\");var e=new FormData;return t.forEach((function(t){e.append(\"image\",t)})),e.append(\"content\",p),i({type:u.e,data:e})}),[p,t]),g=Object(c.useRef)(),v=Object(c.useCallback)((function(){g.current.click()}),[g.current]),w=Object(c.useCallback)((function(e){console.log(\"images\",e.target.files);var t=new FormData;[].forEach.call(e.target.files,(function(e){t.append(\"image\",e)})),console.log(t.image),i({type:u.G,data:t})})),x=Object(c.useCallback)((function(e){return function(){i({type:u.v,data:e})}}));return Object(j.jsxs)(a.a,{style:{margin:\"10px 0 20px\"},encType:\"multipart/form-data\",onFinish:h,children:[Object(j.jsx)(l.a.TextArea,{value:p,onChange:m,maxLength:140,placeholder:\"\\uc5b4\\ub5a4 \\uc2e0\\uae30\\ud55c \\uc77c\\uc774 \\uc788\\uc5c8\\ub098\\uc694?\"}),Object(j.jsxs)(\"div\",{children:[Object(j.jsx)(\"input\",{type:\"file\",name:\"image\",multiple:!0,hidden:!0,ref:g,onChange:w}),Object(j.jsx)(s.a,{onClick:v,children:\"\\uc774\\ubbf8\\uc9c0 \\uc5c5\\ub85c\\ub4dc\"}),Object(j.jsx)(s.a,{type:\"primary\",style:{float:\"right\"},htmlType:\"submit\",children:\"\\uc9f9\\uc9f9\"})]}),Object(j.jsx)(\"div\",{children:t.map((function(e,t){return Object(j.jsxs)(\"div\",{style:{display:\"inline-block\"},children:[Object(j.jsx)(\"img\",{src:\"http://localhost:3065/\".concat(e),style:{width:\"200px\"},alt:e}),Object(j.jsx)(\"div\",{children:Object(j.jsx)(s.a,{onClick:x(t),children:\"\\uc81c\\uac70\"})})]},e)}))})]})},b=n(\"kduo\"),p=!0;t.default=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.user})).me,n=Object(r.c)((function(e){return e.post})),o=n.mainPosts,a=n.hasMorePosts,l=n.loadPostsLoading,s=n.retweetError;return Object(c.useEffect)((function(){console.log(\"rerender\"),s&&alert(s)}),[s]),Object(c.useEffect)((function(){function t(){if(window.scrollY+document.documentElement.clientHeight>document.documentElement.scrollHeight-300&&a&&!l){var t,n=null===(t=o[o.length-1])||void 0===t?void 0:t.id;e({type:u.n,lastId:n})}}return window.addEventListener(\"scroll\",t),function(){window.removeEventListener(\"scroll\",t)}}),[a,l,o]),Object(j.jsxs)(i.a,{children:[t&&Object(j.jsx)(f,{}),o.map((function(e,t){return Object(j.jsx)(b.a,{post:e},e.id)}))]})}},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"RNiq\")}])}},[[\"vlRD\",0,2,6,1,3,4,5,7]]]);","map":{"version":3,"sources":["static/chunks/pages/index-f0c2eef7f1f0bbe477f5.js"],"names":["_N_E","window","push","RNiq","module","__webpack_exports__","__webpack_require__","r","d","__N_SSP","react","AppLayout","es","slicedToArray","es_form","input","es_button","reducers_post","useInput","jsx_runtime","components_PostForm","_useSelector","Object","state","post","imagePaths","addPostDone","dispatch","_useInput","_useInput2","text","onChangeText","setText","onSubmit","trim","alert","formData","FormData","forEach","p","append","type","data","imageInput","onClickImageUpload","current","click","onChangeImages","e","console","log","target","files","imageFormData","call","f","image","onRemoveImage","index","style","margin","encType","onFinish","children","TextArea","value","onChange","maxLength","placeholder","name","multiple","hidden","ref","onClick","float","htmlType","map","v","i","display","src","concat","width","alt","PostCard","me","user","_useSelector2","mainPosts","hasMorePosts","loadPostsLoading","retweetError","onScroll","scrollY","document","documentElement","clientHeight","scrollHeight","_mainPosts","lastId","length","id","addEventListener","removeEventListener","vlRD","exports","__NEXT_P"],"mappings":"AAAAA,MACCC,OAAyB,iBAAIA,OAAyB,kBAAK,IAAIC,KAAK,CAAC,CAAC,IAAI,CAErEC,KACA,SAAUC,EAAQC,EAAqBC,GAE7C,aAEAA,EAAoBC,EAAEF,GAGtBC,EAAoBE,EAAEH,EAAqB,WAAW,WAAa,OAAqBI,KAGxF,IAAIC,EAAQJ,EAAoB,QAG5BK,EAAYL,EAAoB,QAGhCM,EAAKN,EAAoB,QAGzBO,EAAgBP,EAAoB,QAGpCQ,EAAUR,EAAoB,QAG9BS,EAAQT,EAAoB,QAG5BU,EAAYV,EAAoB,QAGhCW,EAAgBX,EAAoB,QAGpCY,EAAWZ,EAAoB,QAG/Ba,EAAcb,EAAoB,QA6HLc,EAjHT,WACtB,IAAIC,EAAeC,OAAOV,EAAwB,EAA/BU,EAAkC,SAAUC,GAC7D,OAAOA,EAAMC,QAEXC,EAAaJ,EAAaI,WAC1BC,EAAcL,EAAaK,YAE3BC,EAAWL,OAAOV,EAAwB,EAA/BU,GAEXM,EAAYN,OAAOJ,EAA0B,EAAjCI,CAAoC,IAChDO,EAAaP,OAAOT,EAA+B,EAAtCS,CAAyCM,EAAW,GACjEE,EAAOD,EAAW,GAClBE,EAAeF,EAAW,GAC1BG,EAAUH,EAAW,GAEzBP,OAAOZ,EAAiB,UAAxBY,EAA2B,WACrBI,GACFM,EAAQ,MAET,CAACN,IACJ,IAAIO,EAAWX,OAAOZ,EAAmB,YAA1BY,EAA6B,WAC1C,IAAKQ,IAASA,EAAKI,OACjB,OAAOC,MAAM,4DAGf,IAAIC,EAAW,IAAIC,SAKnB,OAJAZ,EAAWa,SAAQ,SAAUC,GAC3BH,EAASI,OAAO,QAASD,MAE3BH,EAASI,OAAO,UAAWV,GACpBH,EAAS,CACdc,KAAMxB,EAAwC,EAC9CyB,KAAMN,MAEP,CAACN,EAAML,IACNkB,EAAarB,OAAOZ,EAAc,OAArBY,GACbsB,EAAqBtB,OAAOZ,EAAmB,YAA1BY,EAA6B,WACpDqB,EAAWE,QAAQC,UAClB,CAACH,EAAWE,UACXE,EAAiBzB,OAAOZ,EAAmB,YAA1BY,EAA6B,SAAU0B,GAC1DC,QAAQC,IAAI,SAAUF,EAAEG,OAAOC,OAC/B,IAAIC,EAAgB,IAAIhB,SACxB,GAAGC,QAAQgB,KAAKN,EAAEG,OAAOC,OAAO,SAAUG,GACxCF,EAAcb,OAAO,QAASe,MAEhCN,QAAQC,IAAIG,EAAcG,OAC1B7B,EAAS,CACPc,KAAMxB,EAA6C,EACnDyB,KAAMW,OAGNI,EAAgBnC,OAAOZ,EAAmB,YAA1BY,EAA6B,SAAUoC,GACzD,OAAO,WACL/B,EAAS,CACPc,KAAMxB,EAAoC,EAC1CyB,KAAMgB,QAIZ,OAAoBpC,OAAOH,EAAkB,KAAzBG,CAA4BR,EAAyB,EAAG,CAC1E6C,MAAO,CACLC,OAAQ,eAEVC,QAAS,sBACTC,SAAU7B,EACV8B,SAAU,CAAczC,OAAOH,EAAiB,IAAxBG,CAA2BP,EAAuB,EAAEiD,SAAU,CACpFC,MAAOnC,EACPoC,SAAUnC,EACVoC,UAAW,IACXC,YAAa,2EACE9C,OAAOH,EAAkB,KAAzBG,CAA4B,MAAO,CAClDyC,SAAU,CAAczC,OAAOH,EAAiB,IAAxBG,CAA2B,QAAS,CAC1DmB,KAAM,OACN4B,KAAM,QACNC,UAAU,EACVC,QAAQ,EACRC,IAAK7B,EACLuB,SAAUnB,IACKzB,OAAOH,EAAiB,IAAxBG,CAA2BN,EAA2B,EAAG,CACxEyD,QAAS7B,EACTmB,SAAU,0CACKzC,OAAOH,EAAiB,IAAxBG,CAA2BN,EAA2B,EAAG,CACxEyB,KAAM,UACNkB,MAAO,CACLe,MAAS,SAEXC,SAAU,SACVZ,SAAU,oBAEGzC,OAAOH,EAAiB,IAAxBG,CAA2B,MAAO,CACjDyC,SAAUtC,EAAWmD,KAAI,SAAUC,EAAGC,GACpC,OAAoBxD,OAAOH,EAAkB,KAAzBG,CAA4B,MAAO,CACrDqC,MAAO,CACLoB,QAAS,gBAEXhB,SAAU,CAAczC,OAAOH,EAAiB,IAAxBG,CAA2B,MAAO,CACxD0D,IAAK,yBAAyBC,OAAOJ,GACrClB,MAAO,CACLuB,MAAO,SAETC,IAAKN,IACUvD,OAAOH,EAAiB,IAAxBG,CAA2B,MAAO,CACjDyC,SAAuBzC,OAAOH,EAAiB,IAAxBG,CAA2BN,EAA2B,EAAG,CAC9EyD,QAAShB,EAAcqB,GACvBf,SAAU,qBAGbc,YAQPO,EAAW9E,EAAoB,QAgE/BG,GAAU,EAC2BJ,EAA6B,QArDrD,WACf,IAAIsB,EAAWL,OAAOV,EAAwB,EAA/BU,GAKX+D,EAHe/D,OAAOV,EAAwB,EAA/BU,EAAkC,SAAUC,GAC7D,OAAOA,EAAM+D,QAEOD,GAElBE,EAAgBjE,OAAOV,EAAwB,EAA/BU,EAAkC,SAAUC,GAC9D,OAAOA,EAAMC,QAEXgE,EAAYD,EAAcC,UAC1BC,EAAeF,EAAcE,aAC7BC,EAAmBH,EAAcG,iBACjCC,EAAeJ,EAAcI,aA6BjC,OA3BArE,OAAOZ,EAAiB,UAAxBY,EAA2B,WACzB2B,QAAQC,IAAI,YAERyC,GACFxD,MAAMwD,KAEP,CAACA,IACJrE,OAAOZ,EAAiB,UAAxBY,EAA2B,WACzB,SAASsE,IACP,GAAI3F,OAAO4F,QAAUC,SAASC,gBAAgBC,aAAeF,SAASC,gBAAgBE,aAAe,KAC/FR,IAAiBC,EAAkB,CACrC,IAAIQ,EAEAC,EAA4D,QAAlDD,EAAaV,EAAUA,EAAUY,OAAS,UAA+B,IAAfF,OAAwB,EAASA,EAAWG,GACpH1E,EAAS,CACPc,KAAMxB,EAA0C,EAChDkF,OAAQA,KAOhB,OADAlG,OAAOqG,iBAAiB,SAAUV,GAC3B,WACL3F,OAAOsG,oBAAoB,SAAUX,MAEtC,CAACH,EAAcC,EAAkBF,IAChBlE,OAAOH,EAAkB,KAAzBG,CAA4BX,EAA2B,EAAG,CAC5EoD,SAAU,CAACsB,GAAmB/D,OAAOH,EAAiB,IAAxBG,CAA2BF,EAAqB,IAAKoE,EAAUZ,KAAI,SAAUpD,EAAMkC,GAC/G,OAAoBpC,OAAOH,EAAiB,IAAxBG,CAA2B8D,EAA0B,EAAG,CAC1E5D,KAAMA,GACLA,EAAK6E,YA4BRG,KACA,SAAUpG,EAAQqG,EAASnG,IAG5BL,OAAOyG,SAAWzG,OAAOyG,UAAY,IAAIxG,KAAK,CAC7C,IACA,WACE,OAAOI,EAAoB,aAOjC,CAAC,CAAC,OAAO,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE"},"extractedComments":[]}